<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Profil utilisateur</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Quicksand:wght@400;500&family=Pacifico&display=swap" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
        <link rel="stylesheet" href="/css/employe/details.css">
        <link rel="stylesheet" href="/css/partials/navbar.css">
        <link rel="stylesheet" href="/css/partials/footer.css">
        <script src="../js/employe.js"></script>
        <link rel="icon" href="/media/logoo.png" type="image/x-icon">
    </head>
    <body>
        <%- include("../partials/navbar") %>
        <section id="employee-details" class="py-5">
            <div class="container">
                <div class="profile-header text-center">
                    <h1>Modification des Informations des Employés</h1>
                    <p>Consultez les informations personnelles de votre employés. Vous pouvez modifier les informations personnelles en cliquant sur les champs à modifier.</p>
                </div>
                <div class="row">
                    <div class="col-lg-8">
                        <div class="card" data-employee-id="<%= employee._id %>">
                            <div class="card-header">
                                <h5>Détails de l'employé</h5>
                            </div>
                            <div class="card-body">
                                <div class="profile-details">
                                    <div class="editable" id="edit-nom" data-field="name">
                                        <strong>Nom :</strong> <span class="field-value"><%= employee.name %></span>
                                        <i class="fas fa-edit edit-icon"></i>
                                    </div>
                            
                                    <div class="separator"></div>
                                    <div class="editable" id="edit-email" data-field="email">
                                        <strong>Email :</strong> <span class="field-value"><%= employee.email %></span>
                                        <i class="fas fa-edit edit-icon"></i>
                                    </div>
                            
                                    <div class="separator"></div>
                                    <div class="editable" id="edit-phone" data-field="phone">
                                        <strong>Téléphone :</strong> <span class="field-value"><%= employee.phone || 'Non renseigné' %></span>
                                        <i class="fas fa-edit edit-icon"></i>
                                    </div>
                            
                                    <div class="separator"></div>
                                    <div class="editable" id="edit-role" data-field="role">
                                        <strong>Rôle :</strong> <span class="field-value"><%= employee.role %></span>
                                        <i class="fas fa-edit edit-icon"></i>
                                    </div>
                            
                                    <div class="separator"></div>
                                    <div class="editable" id="edit-workHoursPerWeek" data-field="workHoursPerWeek">
                                        <strong>Heures de travail par semaine :</strong>
                                        <span class="field-value"><%= employee.workHoursPerWeek %></span>
                                        <i class="fas fa-edit edit-icon"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
        
                    <div class="col-lg-4 text-center">
                        <div class="profile-image">
                            <img src="/media/creche.png" alt="<%= employee.name %>" class="img-fluid rounded-circle" style="width: 250px;height: 250px;object-fit: cover;margin-bottom: 2vh;">
                            <h5><%= employee.name %></h5>
                            <p><%= employee.role %></p>
                        </div>
                        <% if (user && user.role === "pro") { %>
                            <div class="card-body text-center">
                                <% if (!employee.userAccount) { %>
                                    <a href="/employee/send-invitation/<%= employee._id %>" class="btn btn-info mb-3">
                                    Envoyer l'invitation
                                    </a>
                                <% } %>
                                <button class="btn btn-danger" id="deleteEmployeeBtn" data-id="<%= employee._id %>">
                                    Supprimer l'employé
                                </button>
                            </div>
                        <% } %>
                    </div>
                </div>
            </div>
        </section>
        
        <%- include("../partials/footer") %>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>